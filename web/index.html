<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RGF Music Formula Generator</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header>
    <h1>RGF f�p�e Music Formula Generator</h1>
    <p class="tagline">Web adaptation of the Excel songwriting cockpit</p>
  </header>

  <main class="layout">
    <section class="panel" id="scoring-panel">
      <h2>Scoring Inputs</h2>
      <div class="panel-group">
        <section>
          <h3>Constants &amp; Controls</h3>
          <div id="constants"></div>
          <div id="controls"></div>
        </section>
        <section>
          <h3>Weights</h3>
          <div id="weights"></div>
          <div class="inline-buttons">
            <button type="button" data-preset="street">Street</button>
            <button type="button" data-preset="club">Club</button>
            <button type="button" data-preset="backpack">Backpack</button>
            <button type="button" data-preset="streaming">Streaming</button>
            <button type="button" data-preset="defaults">Reset Defaults</button>
          </div>
        </section>
        <section>
          <h3>Base Inputs (0-10)</h3>
          <div id="base-inputs"></div>
        </section>
        <section>          <h3>Derived Inputs (0-1)</h3>          <div id="derived-inputs"></div>        </section>        <section>          <h3>Creative Brief Inputs</h3>          <div id="creative-inputs"></div>        </section>
        <section>
          <h3>Genre Mix</h3>
          <div id="genre-mix"></div>
          <p class="hint">Weights should total 100%. Use the sliders or enter values directly.</p>
          <div class="inline-buttons">
            <button type="button" id="open-genre-library">View Library</button>
            <button type="button" id="apply-genre-mix">Apply Genre Mix</button>
            <button type="button" id="open-accent-library">Accent Library</button>
          </div>
        </section>
        <section>
          <h3>Premise &amp; Phonetics</h3>
          <label class="field">
            <span>Premise</span>
            <select id="premise-select"></select>
          </label>
          <label class="field">
            <span>Phonetic Accent</span>
            <select id="accent-select"></select>
          </label>
        </section>
      </div>
    </section>

    <section class="panel" id="outputs-panel">
      <h2>Scores &amp; Outputs</h2>
      <div class="panel-group">
        <section>
          <h3>Computed Scores</h3>
          <div id="computed-scores"></div>
        </section>
        <section>
          <h3>User Sections (lock lyrics verbatim)</h3>
          <div id="user-sections"></div>
        </section>
        <section>
          <h3>Creative Brief</h3>
          <div class="actions">
            <button type="button" id="generate-brief">Make Brief</button>
          </div>
          <pre id="creative-brief" class="output-block"></pre>
        </section>
        <section>
          <h3>Suno Export Blocks</h3>
          <div class="actions">
            <button type="button" id="generate-suno">Make Suno</button>
          </div>
          <pre id="suno-output" class="output-block"></pre>
        </section>
        <section>
          <h3>AI Prompt Workspace</h3>
          <div class="actions">
            <button type="button" id="build-prompt">Build Prompt</button>
          </div>
          <pre id="ai-prompt" class="output-block"></pre>
        </section>
        <section>
          <h3>Call AI (Optional)</h3>
          <form id="ai-settings" class="grid-form">
            <label><span>Endpoint URL</span><input type="url" name="endpoint"></label>
            <label><span>Model</span><input type="text" name="model"></label>
            <label><span>API Key (Bearer)</span><input type="password" name="apiKey"></label>
            <label><span>Organization (optional)</span><input type="text" name="organization"></label>
            <label><span>Temperature</span><input type="number" step="0.01" name="temperature"></label>
            <label><span>Top P</span><input type="number" step="0.01" name="topP"></label>
            <label><span>Frequency Penalty</span><input type="number" step="0.01" name="frequencyPenalty"></label>
            <label><span>Presence Penalty</span><input type="number" step="0.01" name="presencePenalty"></label>
            <label><span>Max Tokens</span><input type="number" name="maxTokens"></label>
            <label><span>Request Timeout (ms)</span><input type="number" name="timeoutMs"></label>
            <label class="span-2"><span>System Prompt</span><textarea name="systemPrompt" rows="3"></textarea></label>
            <label class="span-2"><span>Stop Sequences (comma)</span><input type="text" name="stopSequences"></label>
            <label><span>User Label (optional)</span><input type="text" name="userLabel"></label>
            <label><span>Response Format (JSON)</span><input type="text" name="responseFormat"></label>
          </form>
          <div class="actions">
            <button type="button" id="call-ai">Call AI</button>
          </div>
          <pre id="ai-response" class="output-block"></pre>
        </section>
      </div>
    </section>
  </main>

  <dialog id="library-dialog">
    <div class="dialog-header">
      <h2 id="dialog-title"></h2>
      <button type="button" id="close-dialog" aria-label="Close">�</button>
    </div>
    <div id="dialog-content"></div>
  </dialog>

  <footer>
    <p>RGF web build &copy; iMob Worldwide � ported from the VBA module.</p>
  </footer>

  <script type="module" src="./app.js"></script>
</body>
</html>


